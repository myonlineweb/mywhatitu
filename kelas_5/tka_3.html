<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MWhatituS</title>
    <style>
        /* --- CSS SAMA SEPERTI SEBELUMNYA (GAK PERLU UBAH) --- */
        body { margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #1a1a2e; background-image: url('myonlineweb.github.io/basepng/malamback.png'); background-size: cover; background-position: center; background-attachment: fixed; min-height: 100vh; display: flex; justify-content: center; align-items: flex-start; }
        .container { width: 78%; max-width: 800px; margin: 40px 0; padding: 30px; background-color: rgba(255, 255, 255, 0.65); border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); backdrop-filter: blur(10px); }
        h1 { text-align: center; color: #333; margin-bottom: 30px; text-transform: uppercase; letter-spacing: 2px; }
        .question-card { border-bottom: 2px solid #eee; padding-bottom: 25px; margin-bottom: 25px; }
        .question-text { font-size: 1.2em; font-weight: bold; margin-bottom: 15px; color: #2c3e50; }
        .options { list-style-type: none; padding: 0; }
        .option-btn { display: block; width: 100%; padding: 12px 20px; margin: 8px 0; background-color: #fff; border: 2px solid #ddd; border-radius: 8px; text-align: left; cursor: pointer; transition: all 0.2s; font-size: 1em; color: #444; font-weight: 500; }
        .option-btn:hover:not(.disabled) { background-color: #eef2f3; border-color: #bbb; transform: translateX(5px); }
        .correct { background-color: #d4edda !important; border-color: #28a745 !important; color: #155724 !important; }
        .wrong { background-color: #f8d7da !important; border-color: #dc3545 !important; color: #721c24 !important; }
        .disabled { cursor: no-drop; opacity: 0.7; }
        .explanation { display: none; margin-top: 15px; padding: 15px; background-color: #e8eaf6; border-left: 5px solid #3f51b5; border-radius: 4px; font-size: 0.95em; line-height: 1.5; color: #333; }
        .submit-container { text-align: center; margin: 40px 0 20px 0; }
        .btn-submit { padding: 15px 50px; font-size: 1.2em; font-weight: bold; color: white; background-color: #27ae60; border: none; border-radius: 50px; cursor: pointer; box-shadow: 0 4px 6px rgba(0,0,0,0.2); transition: all 0.3s ease; opacity: 0.5; pointer-events: none; filter: grayscale(100%); }
        .btn-submit.active { opacity: 1; pointer-events: auto; filter: grayscale(0%); animation: pulse 2s infinite; }
        .btn-submit:hover { background-color: #219150; transform: translateY(-3px); box-shadow: 0 8px 15px rgba(0,0,0,0.3); }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(39, 174, 96, 0.7); } 70% { box-shadow: 0 0 0 20px rgba(39, 174, 96, 0); } 100% { box-shadow: 0 0 0 0 rgba(39, 174, 96, 0); } }
        .score-board { position: fixed; bottom: 0; left: 0; width: 100%; background-color: #2c3e50; color: white; padding: 15px; text-align: center; font-size: 1.2em; font-weight: bold; box-shadow: 0 -2px 10px rgba(0,0,0,0.2); z-index: 100; display: flex; justify-content: center; gap: 20px; }
        .spacer { height: 100px; }
        
        /* STYLE MODAL POPUP */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(5px); display: none; justify-content: center; align-items: center; z-index: 1000; opacity: 0; transition: opacity 0.3s ease; }
        .modal-overlay.show { display: flex; opacity: 1; }
        .modal-content { background: white; padding: 30px; border-radius: 20px; width: 90%; max-width: 400px; text-align: center; transform: scale(0.7); transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .modal-overlay.show .modal-content { transform: scale(1); }
        .modal-icon { font-size: 3em; margin-bottom: 10px; animation: pop 0.5s; }
        .modal-content h2 { margin: 10px 0; color: #333; }
        .result-summary { display: flex; justify-content: space-around; margin: 20px 0; gap: 10px; }
        .res-box { flex: 1; padding: 10px; border-radius: 10px; color: white; display: flex; flex-direction: column; }
        .res-box.correct { background: #27ae60; }
        .res-box.score { background: #2980b9; transform: scale(1.1); font-weight: bold; }
        .res-box.wrong { background: #c0392b; }
        .res-box .label { font-size: 0.8em; opacity: 0.9; }
        .res-box .val { font-size: 1.5em; font-weight: bold; }
        .btn-close { margin-top: 15px; padding: 10px 30px; background: #333; color: white; border: none; border-radius: 50px; cursor: pointer; font-size: 1em; }
        .btn-close:hover { background: #000; }
        @keyframes pop { 0% { transform: scale(0); } 80% { transform: scale(1.2); } 100% { transform: scale(1); } }
        
        /* --- STYLE KHUSUS PASSWORD EYE --- */
        .password-wrapper {
            position: relative; /* Kunci agar icon bisa nempel relatif ke kotak ini */
            width: 100%;
            margin-bottom: 20px;
        }
        
        /* Kita pindahkan style input kesini agar lebih rapi */
        .password-wrapper input {
            width: 100%; 
            padding: 15px; 
            padding-right: 50px; /* PENTING: Kasih jarak kanan biar teks gak nabrak icon */
            border-radius: 10px; 
            border: 2px solid #ddd; 
            font-size: 1.1em; 
            box-sizing: border-box;
        }

        .eye-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%); /* Biar pas di tengah vertikal */
            cursor: pointer;
            color: #888;
            user-select: none; /* Biar icon gak ke-blok biru kalau diklik */
        }
        
        .eye-icon:hover {
            color: #333;
        }
        /* Tambahan Style untuk Warning */
        .modal-icon.warning {
            color: #f39c12; /* Warna Oranye/Kuning Peringatan */
            animation: shake 0.5s; /* Animasi getar */
        }

        /* Animasi Getar biar kerasa "Error" */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }
        /* --- STYLE TOMBOL KEMBALI --- */
        .btn-back {
            display: inline-block;
            text-decoration: none;
            color: #fff;
            background-color: #e74c3c; /* Merah */
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 0.9em;
            margin-bottom: 20px; /* Jarak ke judul */
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            transition: transform 0.2s, background-color 0.2s;
        }

        .btn-back:hover {
            background-color: #c0392b;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>

    <div class="container">
        <a href="index.html" class="btn-back">‚¨Ö Kembali</a>
        <h1>Template MyWhatituS</h1>
        <div style="margin-bottom: 20px; max-width: 100%;">
    <input type="text" id="input-nama" placeholder="Ketik Username" 
    style="width: 100%; padding: 15px; margin-bottom: 10px; border-radius: 10px; border: 2px solid #ddd; font-size: 1.1em; box-sizing: border-box;">
</div>
<div class="password-wrapper">
        <input type="password" id="input-password" placeholder="Ketik Password">
        
        <span id="btn-toggle-pass" class="eye-icon" title="Lihat Password">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
        </span>
    </div>
<div id="quiz-area"></div>
        <div id="quiz-area"></div>
        <div class="submit-container">
            <button id="btn-submit" class="btn-submit">SELESAIKAN SEMUA SOAL</button>
        </div>
        <div class="spacer"></div>
    </div>

    <div class="score-board">
        <span>‚úÖ Benar: <span id="score-correct">0</span></span>
        <span>‚ùå Salah: <span id="score-wrong">0</span></span>
    </div>

    <div id="custom-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-icon">üéâ</div>
            <h2>Hasil Terkirim!</h2>
            <p>Data jawabanmu sudah aman di database Firebase.</p>
            <div class="result-summary">
                <div class="res-box correct">
                    <span class="label">Benar</span>
                    <span class="val" id="modal-correct">0</span>
                </div>
                <div class="res-box score">
                    <span class="label">Nilai</span>
                    <span class="val" id="modal-score">0</span>
                </div>
                <div class="res-box wrong">
                    <span class="label">Salah</span>
                    <span class="val" id="modal-wrong">0</span>
                </div>
            </div>
            <button onclick="closeModal()" class="btn-close">Selesai</button>
        </div>
    </div>

<div id="warning-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-icon warning">‚ö†Ô∏è</div>
            
            <h2 id="warning-title" style="color: #c0392b;">Ups, Tunggu Dulu!</h2>
            <p id="warning-message" style="color: #555; line-height: 1.6;">Ada input/password yang tidak sesuai nih!</p>
            
            <button onclick="closeWarning()" class="btn-close" style="background-color: #c0392b;">Perbaiki</button>
        </div>
    </div>
    
    <script>
/**
 * TASK_ID: ANBK_SD5_ADVANCED_50Q
 * FOCUS: Literasi Membaca & Numerasi (High Difficulty/HOTS)
 * FORMAT: JavaScript Data Array
 */

let dataSoal = [
    // --- NUMERASI: ANALISIS DATA & OPERASI (HOTS) ---
    {
        question: "1. Sebuah toko menawarkan promo 'Beli 2 Gratis 1' untuk buku seharga Rp15.000 per buah. Jika Andi ingin memiliki 12 buku, berapa total uang minimum yang harus ia bayar?",
        options: ["Rp180.000", "Rp150.000", "Rp120.000", "Rp90.000"],
        correctIndex: 2,
        explanation: "Promo Beli 2 Gratis 1 artinya setiap 3 buku hanya bayar 2. Untuk 12 buku, Andi membayar 8 buku saja (12/3 = 4 paket; 4 x 2 = 8). 8 x Rp15.000 = Rp120.000."
    },
    {
        question: "2. Data pengunjung perpustakaan: Senin (25 orang), Selasa (30), Rabu (20), Kamis (x). Jika rata-rata pengunjung selama 4 hari tersebut adalah 28 orang, berapa nilai x?",
        options: ["32 orang", "35 orang", "37 orang", "40 orang"],
        correctIndex: 2,
        explanation: "Total pengunjung seharusnya 28 x 4 = 112. Nilai x = 112 - (25 + 30 + 20) = 112 - 75 = 37."
    },
    {
        question: "3. Sebuah bak penampungan air berisi 1/4 bagian. Setelah ditambah 15 liter, bak tersebut menjadi berisi setengahnya. Berapa kapasitas total bak tersebut?",
        options: ["30 liter", "45 liter", "60 liter", "75 liter"],
        correctIndex: 2,
        explanation: "Selisih bagian adalah 1/2 - 1/4 = 1/4. Jika 1/4 bagian adalah 15 liter, maka kapasitas penuh adalah 15 x 4 = 60 liter."
    },
    {
        question: "4. Seorang pelari menempuh jarak 1,5 km dalam 10 menit. Berapakah kecepatan rata-rata pelari tersebut dalam satuan km/jam?",
        options: ["6 km/jam", "9 km/jam", "12 km/jam", "15 km/jam"],
        correctIndex: 1,
        explanation: "10 menit adalah 1/6 jam. Kecepatan = Jarak / Waktu = 1,5 / (1/6) = 1,5 x 6 = 9 km/jam."
    },
    {
        question: "5. Di sebuah lahan parkir terdapat 40 kendaraan yang terdiri dari motor dan mobil. Jika total jumlah roda adalah 110 (tanpa ban serep), berapa jumlah mobil di lahan tersebut?",
        options: ["10 mobil", "15 mobil", "20 mobil", "25 mobil"],
        correctIndex: 1,
        explanation: "Jika semua motor (40x2=80 roda), ada selisih 30 roda. Selisih roda mobil dan motor adalah 2. Maka mobil = 30/2 = 15 mobil."
    },

    // --- LITERASI: ANALISIS TEKS INFORMATIF (KONTEKSTUAL) ---
    {
        question: "6. (Teks) 'Penggunaan Panel Surya di perumahan meningkat 40% tahun ini. Meskipun biaya pemasangan awal mahal, panel surya mampu memangkas tagihan listrik hingga 60% dalam jangka panjang.' Berdasarkan teks, apa keuntungan utama panel surya bagi penghuni rumah?",
        options: ["Biaya pemasangan yang murah", "Peningkatan daya listrik PLN", "Efisiensi biaya pengeluaran rutin", "Kemudahan perawatan alat"],
        correctIndex: 2,
        explanation: "Memangkas tagihan listrik hingga 60% menunjukkan efisiensi biaya rutin jangka panjang."
    },
    {
        question: "7. Manakah kalimat berikut yang mengandung opini subjektif?",
        options: ["Ibu kota Nusantara terletak di Kalimantan Timur.", "Siswa SD kelas 5 wajib mengikuti ANBK.", "Pemandangan di Raja Ampat adalah yang tercantik di dunia.", "Garam merupakan hasil kristalisasi air laut."],
        correctIndex: 2,
        explanation: "Kata 'tercantik' adalah pendapat subjektif (opini), sedangkan yang lain adalah fakta objektif."
    },
    {
        question: "8. (Teks) 'Reni mengamati bahwa tanaman yang diletakkan di tempat gelap tumbuh lebih cepat tetapi batangnya lemah dan daunnya pucat.' Fenomena ini disebut etiolasi. Apa penyebab utama kondisi batang yang lemah pada teks tersebut?",
        options: ["Kelebihan air", "Kurangnya nutrisi tanah", "Ketiadaan cahaya matahari", "Suhu udara yang terlalu dingin"],
        correctIndex: 2,
        explanation: "Teks menyebutkan kondisi tersebut terjadi karena tanaman diletakkan di tempat gelap (tanpa cahaya)."
    },

    // --- NUMERASI: GEOMETRI & LOGIKA SPASIAL ---
    {
        question: "9. Sebuah kubus besar memiliki volume 64 cm¬≥. Jika kubus tersebut dipotong-potong menjadi kubus kecil dengan rusuk 1 cm, berapa banyak kubus kecil yang dihasilkan?",
        options: ["4 buah", "16 buah", "32 buah", "64 buah"],
        correctIndex: 3,
        explanation: "Volume kubus kecil = 1x1x1 = 1 cm¬≥. Banyaknya = 64 / 1 = 64 buah."
    },
    {
        question: "10. Pak Budi ingin memagari kebunnya yang berbentuk persegi dengan luas 144 m¬≤. Jika biaya pagar adalah Rp50.000 per meter, berapa total biaya yang dibutuhkan?",
        options: ["Rp1.200.000", "Rp2.400.000", "Rp4.800.000", "Rp7.200.000"],
        correctIndex: 1,
        explanation: "Sisi = ‚àö144 = 12m. Keliling = 4 x 12 = 48m. Biaya = 48 x 50.000 = 2.400.000."
    },

    // --- LITERASI: INFERENSI & PESAN TERSIRAT ---
    {
        question: "11. 'Jangan biarkan keran air menetes saat tidak digunakan. Tetesan kecil yang terus-menerus bisa membuang ribuan liter air dalam setahun.' Apa tujuan penulis menulis teks tersebut?",
        options: ["Menginformasikan harga air bersih", "Membujuk pembaca untuk berhemat air", "Menjelaskan cara memperbaiki keran", "Menceritakan pengalaman kekurangan air"],
        correctIndex: 1,
        explanation: "Teks tersebut bersifat persuasif untuk mengajak pembaca melakukan konservasi/hemat air."
    },
    {
        question: "12. (Teks) 'Dino selalu bangun terlambat meskipun sudah memasang alarm. Ibunya seringkali harus berteriak berkali-kali agar ia bangun.' Berdasarkan teks, watak Dino adalah...",
        options: ["Disiplin", "Mandiri", "Sulit diatur", "Pemalas"],
        correctIndex: 2, // 'Sulit diatur' atau 'Pemalas' (paling tepat dalam konteks ujian: Pemalas/Tidak Disiplin)
        explanation: "Dino menunjukkan perilaku tidak bertanggung jawab terhadap waktu meski sudah dibantu alat (alarm)."
    },

    // --- NUMERASI: PERSENTASE & DISKON ---
    {
        question: "13. Harga sebuah tas adalah Rp200.000. Toko memberikan diskon 20%, kemudian ada tambahan diskon 5% setelah diskon pertama. Berapakah harga akhir yang harus dibayar?",
        options: ["Rp150.000", "Rp152.000", "Rp160.000", "Rp170.000"],
        correctIndex: 1,
        explanation: "Diskon 1: 200rb - 40rb = 160rb. Diskon 2: 5% dari 160rb = 8rb. Harga akhir: 160rb - 8rb = 152rb."
    },

    // --- LITERASI: STRUKTUR KALIMAT & LOGIKA ---
    {
        question: "14. Manakah kalimat yang menggunakan majas personifikasi?",
        options: ["Wajahnya sangat cantik bagaikan rembulan.", "Angin malam membisikkan pesan kerinduan.", "Suaranya menggelegar membelah angkasa.", "Ibu membawa buah tangan dari Bandung."],
        correctIndex: 1,
        explanation: "Personifikasi memberikan sifat manusia (membisikkan pesan) kepada benda mati (angin)."
    },

    // --- LANJUTAN NUMERASI (HOTS) ---
    {
        question: "15. Skala sebuah peta adalah 1 : 250.000. Jika jarak dua kota pada peta adalah 8 cm, maka jarak sebenarnya adalah...",
        options: ["2 km", "20 km", "200 km", "2.000 km"],
        correctIndex: 1,
        explanation: "8 x 250.000 = 2.000.000 cm = 20 km."
    },
    {
        question: "16. Sebuah bus berangkat dari Jakarta pukul 07.15 menuju Bandung. Jika bus sampai pukul 10.45 tanpa berhenti, berapa menit durasi perjalanan tersebut?",
        options: ["180 menit", "200 menit", "210 menit", "240 menit"],
        correctIndex: 2,
        explanation: "Selisih waktu 3 jam 30 menit. (3 x 60) + 30 = 210 menit."
    },
    {
        question: "17. Hasil dari (12 + 18) x (25 - 15) : 5 adalah...",
        options: ["30", "60", "90", "120"],
        correctIndex: 1,
        explanation: "30 x 10 : 5 = 300 : 5 = 60."
    },
    {
        question: "18. Manakah dari bilangan berikut yang merupakan kelipatan persekutuan dari 4 dan 6?",
        options: ["18", "24", "30", "40"],
        correctIndex: 1,
        explanation: "Kelipatan 4: 4, 8, 12, 16, 20, 24. Kelipatan 6: 6, 12, 18, 24. Yang sama adalah 24."
    },
    {
        question: "19. Sebuah prisma segitiga memiliki luas alas 20 cm¬≤ dan tinggi 15 cm. Berapakah volume prisma tersebut?",
        options: ["100 cm¬≥", "150 cm¬≥", "300 cm¬≥", "600 cm¬≥"],
        correctIndex: 2,
        explanation: "Volume Prisma = Luas Alas x Tinggi = 20 x 15 = 300 cm¬≥."
    },
    {
        question: "20. Rata-rata nilai 4 siswa adalah 80. Jika digabung dengan nilai satu siswa lagi, rata-ratanya menjadi 82. Berapakah nilai siswa yang baru masuk?",
        options: ["85", "88", "90", "92"],
        correctIndex: 2,
        explanation: "Total awal = 4 x 80 = 320. Total baru = 5 x 82 = 410. Nilai baru = 410 - 320 = 90."
    },

    // --- LITERASI: ILMU PENGETAHUAN & PROSES ---
    {
        question: "21. Mengapa es kutub yang mencair dapat menyebabkan bencana global?",
        options: ["Air laut menjadi tawar", "Suhu air laut menjadi dingin", "Permukaan air laut naik dan menenggelamkan daratan", "Ikan di laut akan mati kedinginan"],
        correctIndex: 2,
        explanation: "Pencairan es menambah volume air laut sehingga permukaan air naik secara signifikan."
    },
    {
        question: "22. Perhatikan urutan rantai makanan: Padi -> Belalang -> Katak -> Ular -> Elang. Apa yang terjadi jika populasi katak menurun drastis?",
        options: ["Populasi belalang akan berkurang", "Populasi ular akan meningkat", "Populasi belalang akan meningkat pesat", "Padi akan tumbuh lebih subur"],
        correctIndex: 2,
        explanation: "Katak adalah pemangsa belalang. Jika katak hilang, belalang tidak ada yang memangsa sehingga jumlahnya melonjak."
    },
    {
        question: "23. Sendi yang memungkinkan gerakan ke segala arah disebut...",
        options: ["Sendi Engsel", "Sendi Putar", "Sendi Pelana", "Sendi Peluru"],
        correctIndex: 3,
        explanation: "Sendi peluru (seperti pada bahu) memungkinkan rotasi ke segala arah."
    },
    {
        question: "24. Bagian telinga yang berfungsi menjaga keseimbangan tubuh adalah...",
        options: ["Gendang telinga", "Saluran setengah lingkaran", "Saraf pendengaran", "Daun telinga"],
        correctIndex: 1,
        explanation: "Canalis semi-circularis atau saluran setengah lingkaran berperan dalam sistem keseimbangan."
    },
    {
        question: "25. Bahan kimia yang digunakan untuk membasmi hama tanaman adalah...",
        options: ["Herbisida", "Pestisida", "Fungisida", "Pupuk"],
        correctIndex: 1,
        explanation: "Pestisida adalah istilah umum untuk bahan pembasmi hama (pest)."
    },

    // --- NUMERASI: LOGIKA & POLA ---
    {
        question: "26. Perhatikan pola angka: 2, 5, 11, 23, ... Angka berikutnya adalah...",
        options: ["35", "45", "47", "50"],
        correctIndex: 2,
        explanation: "Polanya adalah (n x 2) + 1. (23 x 2) + 1 = 47."
    },
    {
        question: "27. Jika sebuah jam dinding menunjukkan pukul 09.00, berapakah sudut yang terbentuk antara jarum panjang dan pendek?",
        options: ["90¬∞", "120¬∞", "180¬∞", "270¬∞"],
        correctIndex: 0,
        explanation: "Sudut terkecil pada pukul 09.00 adalah tegak lurus (90 derajat)."
    },
    {
        question: "28. Dalam sebuah kelas terdapat 30 siswa. 60% diantaranya adalah perempuan. Berapa jumlah siswa laki-laki?",
        options: ["10 orang", "12 orang", "15 orang", "18 orang"],
        correctIndex: 1,
        explanation: "Laki-laki = 40% (100%-60%). 40/100 x 30 = 12 orang."
    },
    {
        question: "29. Berapakah hasil dari ‚àö625 + 15¬≤ ?",
        options: ["200", "225", "250", "275"],
        correctIndex: 2,
        explanation: "25 + 225 = 250."
    },
    {
        question: "30. Sebuah kerucut memiliki jari-jari 10 cm dan tinggi 21 cm. Volume kerucut adalah... (phi = 22/7)",
        options: ["2.200 cm¬≥", "4.400 cm¬≥", "6.600 cm¬≥", "700 cm¬≥"],
        correctIndex: 0,
        explanation: "Volume = 1/3 x 22/7 x 10 x 10 x 21 = 2.200 cm¬≥."
    },

    // --- LITERASI: NILAI SOSIAL & BUDAYA ---
    {
        question: "31. Upacara adat pembakaran mayat di Bali disebut...",
        options: ["Sekaten", "Ngaben", "Kasada", "Serabi"],
        correctIndex: 1,
        explanation: "Ngaben merupakan upacara kremasi adat di Bali."
    },
    {
        question: "32. Apa yang dimaksud dengan integrasi nasional?",
        options: ["Pemisahan diri suatu daerah", "Proses penyatuan berbagai kelompok sosial budaya ke dalam kesatuan wilayah", "Pembentukan negara baru", "Penjajahan bangsa lain"],
        correctIndex: 1,
        explanation: "Integrasi adalah proses persatuan elemen-elemen bangsa."
    },
    {
        question: "33. Sikap yang harus dikembangkan dalam masyarakat yang beragam adalah...",
        options: ["Etnosentrisme", "Eksklusivisme", "Toleransi", "Individualisme"],
        correctIndex: 2,
        explanation: "Toleransi adalah kunci keharmonisan dalam keberagaman."
    },
    {
        question: "34. Siapa yang mengetik naskah teks Proklamasi?",
        options: ["Sayuti Melik", "Sukarni", "Moh. Hatta", "Laksamana Maeda"],
        correctIndex: 0,
        explanation: "Naskah proklamasi diketik oleh Sayuti Melik setelah dirumuskan para tokoh."
    },
    {
        question: "35. Apa fungsi utama dari ekspor bagi sebuah negara?",
        options: ["Membeli barang dari luar negeri", "Meningkatkan devisa negara", "Menghabiskan stok barang dalam negeri", "Mencari pinjaman modal"],
        correctIndex: 1,
        explanation: "Penjualan barang ke luar negeri (ekspor) mendatangkan mata uang asing (devisa)."
    },

    // --- CAMPURAN LOGIKA & ANALISIS ---
    {
        question: "36. Jika 'A' = 1, 'B' = 2, 'C' = 3, maka hasil dari 'B' x 'E' + 'A' adalah...",
        options: ["10", "11", "12", "15"],
        correctIndex: 1,
        explanation: "B(2) x E(5) + A(1) = 10 + 1 = 11."
    },
    {
        question: "37. Sebuah lampu berkedip setiap 4 detik, lampu lain setiap 6 detik. Jika keduanya berkedip bersama pada detik ke-0, pada detik ke berapa mereka akan berkedip bersama lagi?",
        options: ["10", "12", "18", "24"],
        correctIndex: 1,
        explanation: "KPK dari 4 dan 6 adalah 12."
    },
    {
        question: "38. Manakah yang bukan merupakan sumber energi terbarukan?",
        options: ["Panas bumi", "Minyak Bumi", "Angin", "Aliran air"],
        correctIndex: 1,
        explanation: "Minyak bumi adalah energi fosil yang akan habis (tak terbarukan)."
    },
    {
        question: "39. Penulisan gelar yang benar di bawah ini adalah...",
        options: ["Dr Ir Soekarno", "Dr. Ir. Soekarno", "dr Ir Soekarno", "DR. IR. Soekarno"],
        correctIndex: 1,
        explanation: "Gelar akademik menggunakan titik di setiap singkatannya sesuai PUEBI/EYD."
    },
    {
        question: "40. Di ekosistem sawah, ular memangsa tikus. Jika ular banyak diburu manusia untuk diambil kulitnya, apa dampaknya bagi petani?",
        options: ["Hasil panen meningkat", "Populasi tikus menurun", "Hasil panen menurun drastis", "Petani tidak terpengaruh"],
        correctIndex: 2,
        explanation: "Ular hilang -> Tikus meledak -> Padi dimakan tikus -> Gagal panen/hasil turun."
    },

    // --- FINAL 10 QUESTIONS ---
    {
        question: "41. Hasil dari 0,25 + 1/2 + 75% adalah...",
        options: ["1,0", "1,25", "1,5", "1,75"],
        correctIndex: 2,
        explanation: "0,25 + 0,5 + 0,75 = 1,5."
    },
    {
        question: "42. Sebuah botol berisi 1.500 ml air. Jika Andi minum 20% isi botol tersebut, berapa ml sisa air di botol?",
        options: ["300 ml", "1.000 ml", "1.200 ml", "1.300 ml"],
        correctIndex: 2,
        explanation: "Minum = 300 ml. Sisa = 1.500 - 300 = 1.200 ml."
    },
    {
        question: "43. Jika kecepatan rata-rata mobil 80 km/jam, berapa waktu yang dibutuhkan untuk menempuh 200 km?",
        options: ["2 jam", "2,5 jam", "3 jam", "3,5 jam"],
        correctIndex: 1,
        explanation: "Waktu = 200 / 80 = 2,5 jam (2 jam 30 menit)."
    },
    {
        question: "44. Kata 'transparansi' memiliki makna yang paling dekat dengan...",
        options: ["Kejujuran", "Keterbukaan", "Kekuatan", "Kejelasan"],
        correctIndex: 1,
        explanation: "Dalam konteks informasi, transparansi berarti keterbukaan."
    },
    {
        question: "45. Berapa jumlah titik sudut pada bangun limas segiempat?",
        options: ["4", "5", "6", "8"],
        correctIndex: 1,
        explanation: "4 di alas + 1 di puncak = 5 titik sudut."
    },
    {
        question: "46. Perbandingan uang Siska dan Tina adalah 5 : 4. Jika selisih uang mereka Rp10.000, berapa uang Siska?",
        options: ["Rp40.000", "Rp50.000", "Rp60.000", "Rp90.000"],
        correctIndex: 1,
        explanation: "Selisih perbandingan = 1 bagian. 1 bagian = 10rb. Siska (5 bagian) = 5 x 10rb = 50rb."
    },
    {
        question: "47. Alat yang digunakan untuk mengukur tekanan udara adalah...",
        options: ["Termometer", "Barometer", "Hygrometer", "Anemometer"],
        correctIndex: 1,
        explanation: "Barometer digunakan untuk mengukur tekanan atmosfer."
    },
    {
        question: "48. Mengapa saat kita berlari napas menjadi lebih cepat?",
        options: ["Paru-paru mengecil", "Tubuh kekurangan oksigen karena aktivitas tinggi", "Jantung berhenti berdetak", "Udara di sekitar menipis"],
        correctIndex: 1,
        explanation: "Aktivitas berat membutuhkan pasokan oksigen yang lebih banyak untuk pembakaran energi."
    },
    {
        question: "49. Tari Saman yang berasal dari Aceh menekankan pada aspek...",
        options: ["Kelenturan tubuh", "Kekuatan kaki", "Kekompakan dan kecepatan gerakan tangan", "Kecantikan riasan wajah"],
        correctIndex: 2,
        explanation: "Tari Saman dikenal dengan gerakan tangan yang harmonis dan sangat cepat secara berkelompok."
    },
    {
        question: "50. Apa singkatan dari ASEAN?",
        options: ["Association of South East Asian Nations", "Association of South East Asian Neighbors", "Alliance of South East Asian Nations", "Association of South East African Nations"],
        correctIndex: 0,
        explanation: "Organisasi kerja sama regional di kawasan Asia Tenggara."
    }
];
        // --- SYSTEM ENGINE ---
        const quizArea = document.getElementById('quiz-area');
        const scoreCorrectEl = document.getElementById('score-correct');
        const scoreWrongEl = document.getElementById('score-wrong');
        // Kita ambil element btnSubmit disini juga untuk logika tampilan
        const btnSubmitGame = document.getElementById('btn-submit');

        // VARIABLE GLOBAL (Agar bisa dibaca oleh script Firebase nanti)
        var correctCount = 0;
        var wrongCount = 0;
        var answeredCount = 0;

        function renderQuiz() {
            quizArea.innerHTML = '';
            dataSoal.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'question-card';
                
                const qText = document.createElement('div');
                qText.className = 'question-text';
                qText.innerText = item.question;
                card.appendChild(qText);

                const optList = document.createElement('ul');
                optList.className = 'options';

                item.options.forEach((opt, optIndex) => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerText = opt;
                    btn.onclick = () => checkAnswer(btn, item, optIndex, optList, explanationDiv);
                    optList.appendChild(btn);
                });
                
                card.appendChild(optList);

                const explanationDiv = document.createElement('div');
                explanationDiv.className = 'explanation';
                explanationDiv.innerHTML = `<strong>Jawaban:</strong> ${item.options[item.correctIndex]}<br><em>${item.explanation}</em>`;
                card.appendChild(explanationDiv);

                quizArea.appendChild(card);
            });
        }

        function checkAnswer(selectedBtn, dataItem, selectedIndex, optListContainer, expDiv) {
            if (optListContainer.classList.contains('answered')) return;

            optListContainer.classList.add('answered');
            answeredCount++;

            const allBtns = optListContainer.querySelectorAll('.option-btn');
            allBtns.forEach(btn => btn.classList.add('disabled'));

            if (selectedIndex === dataItem.correctIndex) {
                selectedBtn.classList.add('correct');
                correctCount++;
                scoreCorrectEl.innerText = correctCount;
            } else {
                selectedBtn.classList.add('wrong');
                wrongCount++;
                scoreWrongEl.innerText = wrongCount;
                allBtns[dataItem.correctIndex].classList.add('correct');
            }

            expDiv.style.display = 'block';
            checkCompletion();
        }

        function checkCompletion() {
            if (answeredCount === dataSoal.length) {
                btnSubmitGame.classList.add('active');
                btnSubmitGame.innerText = "KIRIM JAWABAN SEKARANG!";
            }
        }

        // Render pertama kali
        renderQuiz();
        
        // --- LOGIKA MATA PASSWORD ---
        const toggleBtn = document.getElementById('btn-toggle-pass');
        const passInput = document.getElementById('input-password');

        toggleBtn.addEventListener('click', () => {
            // Cek tipe saat ini
            const type = passInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passInput.setAttribute('type', type);
            
            // Opsional: Ubah warna icon biar user tau lagi aktif
            toggleBtn.style.color = type === 'text' ? '#27ae60' : '#888';
        });

    </script> 
<script type="module">
          import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
        import { getFirestore, collection, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

        // --- KONFIGURASI FIREBASE ---
        const firebaseConfig = {
            apiKey: "AIzaSyCrGo4oJqVPesVBDd52-OGT2sHFNdeI5jo",
            authDomain: "mywhatitu.firebaseapp.com",
            projectId: "mywhatitu",
            storageBucket: "mywhatitu.firebasestorage.app",
            messagingSenderId: "756121162482",
            appId: "1:756121162482:web:3fbc2d0e26f70e51b6f66b"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- KODE SOAL ---
        const KODE_SOAL = "0003"; 
        const KELAS = "5"; 

        const btnSubmitFirebase = document.getElementById('btn-submit');

        btnSubmitFirebase.addEventListener('click', async () => {
            if (!btnSubmitFirebase.classList.contains('active')) return;

            // 1. Ambil Input
            const inputNamaEl = document.getElementById('input-nama');
            const inputPassEl = document.getElementById('input-password');

            let namaAsli = inputNamaEl.value.trim();
            let passwordInput = inputPassEl.value.trim();

            // --- VALIDASI DENGAN CUSTOM MODAL ---
            if (namaAsli === "") {
                showWarning("Nama Kosong!", "Tolong isi nama lengkapmu dulu ya, supaya nilai kamu tercatat di papan peringkat.");
                return;
            }
            if (passwordInput === "") {
                showWarning("Password Kosong!", "Silakan buat password bebas (misal: 1234). Ini berguna biar nilaimu gak dibajak orang lain.");
                return;
            }

            // Hitung Skor
            let finalScore = Math.round((correctCount / dataSoal.length) * 100);

            // Siapkan Data Baru
            const dataJawaban = {
                kode_soal: KODE_SOAL,
                kode_kelas: KELAS,
                nama_user: namaAsli,
                password_user: passwordInput,
                skor: finalScore,
                benar: correctCount,
                salah: wrongCount,
                waktu_terakhir: new Date().toISOString()
            };

            const originalText = btnSubmitFirebase.innerText;
            btnSubmitFirebase.innerText = "Mengecek Data...";
            btnSubmitFirebase.classList.add('disabled');

            try {
                const uniqueDocID = `${namaAsli.toLowerCase().replace(/\s/g, '_')}_${KODE_SOAL}`;
                const docRef = doc(db, "hasil_kuis", uniqueDocID);

                // CEK DATABASE
                const docSnap = await getDoc(docRef);

                if (docSnap.exists()) {
                    // USER LAMA
                    const dataLama = docSnap.data();

                    if (dataLama.password_user !== passwordInput) {
                        // --- PASSWORD SALAH (CUSTOM MODAL) ---
                        showWarning("Akses Ditolak!", `Nama "${namaAsli}" sudah pernah main, tapi password yang kamu masukkan salah. Coba ingat-ingat lagi password lamamu.`);
                        
                        btnSubmitFirebase.innerText = originalText;
                        btnSubmitFirebase.classList.remove('disabled');
                        return; 
                    } 
                    
                    // PASSWORD BENAR -> UPDATE
                    await setDoc(docRef, dataJawaban, { merge: true });

                } else {
                    // USER BARU -> CREATE
                    await setDoc(docRef, dataJawaban);
                }

                // SUKSES
                showModal(correctCount, wrongCount, finalScore);
                btnSubmitFirebase.innerText = "Terkirim ‚úÖ";
                btnSubmitFirebase.classList.remove('active');

            } catch (e) {
                console.error("Error: ", e);
                showWarning("Error Koneksi", "Gagal menghubungi database. Cek koneksi internetmu. Detail: " + e.message);
                btnSubmitFirebase.innerText = originalText;
                btnSubmitFirebase.classList.remove('disabled');
            }
        });

        // --- FUNGSI MODAL SUKSES ---
        window.showModal = (benar, salah, skor) => {
            document.getElementById('modal-correct').innerText = benar;
            document.getElementById('modal-wrong').innerText = salah;
            document.getElementById('modal-score').innerText = skor;
            document.getElementById('custom-modal').classList.add('show');
        }

        window.closeModal = () => {
            document.getElementById('custom-modal').classList.remove('show');
        }

        // --- FUNGSI MODAL WARNING (BARU) ---
        // Fungsi ini dipasang ke window biar bisa dipanggil darimana saja
        window.showWarning = (judul, pesan) => {
            document.getElementById('warning-title').innerText = judul;
            document.getElementById('warning-message').innerText = pesan;
            document.getElementById('warning-modal').classList.add('show');
        }

        window.closeWarning = () => {
            document.getElementById('warning-modal').classList.remove('show');
        }
    </script>
    
</body>
</html>