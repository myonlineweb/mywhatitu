<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MWhatituS</title>
    <style>
        /* --- CSS SAMA SEPERTI SEBELUMNYA (GAK PERLU UBAH) --- */
        body { margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #1a1a2e; background-image: url('myonlineweb.github.io/basepng/malamback.png'); background-size: cover; background-position: center; background-attachment: fixed; min-height: 100vh; display: flex; justify-content: center; align-items: flex-start; }
        .container { width: 78%; max-width: 800px; margin: 40px 0; padding: 30px; background-color: rgba(255, 255, 255, 0.65); border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); backdrop-filter: blur(10px); }
        h1 { text-align: center; color: #333; margin-bottom: 30px; text-transform: uppercase; letter-spacing: 2px; }
        .question-card { border-bottom: 2px solid #eee; padding-bottom: 25px; margin-bottom: 25px; }
        .question-text { font-size: 1.2em; font-weight: bold; margin-bottom: 15px; color: #2c3e50; }
        .options { list-style-type: none; padding: 0; }
        .option-btn { display: block; width: 100%; padding: 12px 20px; margin: 8px 0; background-color: #fff; border: 2px solid #ddd; border-radius: 8px; text-align: left; cursor: pointer; transition: all 0.2s; font-size: 1em; color: #444; font-weight: 500; }
        .option-btn:hover:not(.disabled) { background-color: #eef2f3; border-color: #bbb; transform: translateX(5px); }
        .correct { background-color: #d4edda !important; border-color: #28a745 !important; color: #155724 !important; }
        .wrong { background-color: #f8d7da !important; border-color: #dc3545 !important; color: #721c24 !important; }
        .disabled { cursor: no-drop; opacity: 0.7; }
        .explanation { display: none; margin-top: 15px; padding: 15px; background-color: #e8eaf6; border-left: 5px solid #3f51b5; border-radius: 4px; font-size: 0.95em; line-height: 1.5; color: #333; }
        .submit-container { text-align: center; margin: 40px 0 20px 0; }
        .btn-submit { padding: 15px 50px; font-size: 1.2em; font-weight: bold; color: white; background-color: #27ae60; border: none; border-radius: 50px; cursor: pointer; box-shadow: 0 4px 6px rgba(0,0,0,0.2); transition: all 0.3s ease; opacity: 0.5; pointer-events: none; filter: grayscale(100%); }
        .btn-submit.active { opacity: 1; pointer-events: auto; filter: grayscale(0%); animation: pulse 2s infinite; }
        .btn-submit:hover { background-color: #219150; transform: translateY(-3px); box-shadow: 0 8px 15px rgba(0,0,0,0.3); }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(39, 174, 96, 0.7); } 70% { box-shadow: 0 0 0 20px rgba(39, 174, 96, 0); } 100% { box-shadow: 0 0 0 0 rgba(39, 174, 96, 0); } }
        .score-board { position: fixed; bottom: 0; left: 0; width: 100%; background-color: #2c3e50; color: white; padding: 15px; text-align: center; font-size: 1.2em; font-weight: bold; box-shadow: 0 -2px 10px rgba(0,0,0,0.2); z-index: 100; display: flex; justify-content: center; gap: 20px; }
        .spacer { height: 100px; }
        
        /* STYLE MODAL POPUP */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(5px); display: none; justify-content: center; align-items: center; z-index: 1000; opacity: 0; transition: opacity 0.3s ease; }
        .modal-overlay.show { display: flex; opacity: 1; }
        .modal-content { background: white; padding: 30px; border-radius: 20px; width: 90%; max-width: 400px; text-align: center; transform: scale(0.7); transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .modal-overlay.show .modal-content { transform: scale(1); }
        .modal-icon { font-size: 3em; margin-bottom: 10px; animation: pop 0.5s; }
        .modal-content h2 { margin: 10px 0; color: #333; }
        .result-summary { display: flex; justify-content: space-around; margin: 20px 0; gap: 10px; }
        .res-box { flex: 1; padding: 10px; border-radius: 10px; color: white; display: flex; flex-direction: column; }
        .res-box.correct { background: #27ae60; }
        .res-box.score { background: #2980b9; transform: scale(1.1); font-weight: bold; }
        .res-box.wrong { background: #c0392b; }
        .res-box .label { font-size: 0.8em; opacity: 0.9; }
        .res-box .val { font-size: 1.5em; font-weight: bold; }
        .btn-close { margin-top: 15px; padding: 10px 30px; background: #333; color: white; border: none; border-radius: 50px; cursor: pointer; font-size: 1em; }
        .btn-close:hover { background: #000; }
        @keyframes pop { 0% { transform: scale(0); } 80% { transform: scale(1.2); } 100% { transform: scale(1); } }
        
        /* --- STYLE KHUSUS PASSWORD EYE --- */
        .password-wrapper {
            position: relative; /* Kunci agar icon bisa nempel relatif ke kotak ini */
            width: 100%;
            margin-bottom: 20px;
        }
        
        /* Kita pindahkan style input kesini agar lebih rapi */
        .password-wrapper input {
            width: 100%; 
            padding: 15px; 
            padding-right: 50px; /* PENTING: Kasih jarak kanan biar teks gak nabrak icon */
            border-radius: 10px; 
            border: 2px solid #ddd; 
            font-size: 1.1em; 
            box-sizing: border-box;
        }

        .eye-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%); /* Biar pas di tengah vertikal */
            cursor: pointer;
            color: #888;
            user-select: none; /* Biar icon gak ke-blok biru kalau diklik */
        }
        
        .eye-icon:hover {
            color: #333;
        }
        /* Tambahan Style untuk Warning */
        .modal-icon.warning {
            color: #f39c12; /* Warna Oranye/Kuning Peringatan */
            animation: shake 0.5s; /* Animasi getar */
        }

        /* Animasi Getar biar kerasa "Error" */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }
        /* --- STYLE TOMBOL KEMBALI --- */
        .btn-back {
            display: inline-block;
            text-decoration: none;
            color: #fff;
            background-color: #e74c3c; /* Merah */
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 0.9em;
            margin-bottom: 20px; /* Jarak ke judul */
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            transition: transform 0.2s, background-color 0.2s;
        }

        .btn-back:hover {
            background-color: #c0392b;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>

    <div class="container">
        <a href="index.html" class="btn-back">‚¨Ö Kembali</a>
        <h1>Template MyWhatituS</h1>
        <div style="margin-bottom: 20px; max-width: 100%;">
    <input type="text" id="input-nama" placeholder="Ketik Username" 
    style="width: 100%; padding: 15px; margin-bottom: 10px; border-radius: 10px; border: 2px solid #ddd; font-size: 1.1em; box-sizing: border-box;">
</div>
<div class="password-wrapper">
        <input type="password" id="input-password" placeholder="Ketik Password">
        
        <span id="btn-toggle-pass" class="eye-icon" title="Lihat Password">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
        </span>
    </div>
<div id="quiz-area"></div>
        <div id="quiz-area"></div>
        <div class="submit-container">
            <button id="btn-submit" class="btn-submit">SELESAIKAN SEMUA SOAL</button>
        </div>
        <div class="spacer"></div>
    </div>

    <div class="score-board">
        <span>‚úÖ Benar: <span id="score-correct">0</span></span>
        <span>‚ùå Salah: <span id="score-wrong">0</span></span>
    </div>

    <div id="custom-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-icon">üéâ</div>
            <h2>Hasil Terkirim!</h2>
            <p>Data jawabanmu sudah aman di database Firebase.</p>
            <div class="result-summary">
                <div class="res-box correct">
                    <span class="label">Benar</span>
                    <span class="val" id="modal-correct">0</span>
                </div>
                <div class="res-box score">
                    <span class="label">Nilai</span>
                    <span class="val" id="modal-score">0</span>
                </div>
                <div class="res-box wrong">
                    <span class="label">Salah</span>
                    <span class="val" id="modal-wrong">0</span>
                </div>
            </div>
            <button onclick="closeModal()" class="btn-close">Selesai</button>
        </div>
    </div>

<div id="warning-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-icon warning">‚ö†Ô∏è</div>
            
            <h2 id="warning-title" style="color: #c0392b;">Ups, Tunggu Dulu!</h2>
            <p id="warning-message" style="color: #555; line-height: 1.6;">Ada input/password yang tidak sesuai nih!</p>
            
            <button onclick="closeWarning()" class="btn-close" style="background-color: #c0392b;">Perbaiki</button>
        </div>
    </div>
    
    <script>
/**
 * TASK_ID: ANBK_SD5_REVISED_50Q
 * FOCUS: Literasi & Numerasi (New Content)
 * FORMAT: JavaScript Data Array
 */

let dataSoal = [
    // --- NUMERASI: BILANGAN & OPERASI ---
    {
        question: "1. Sebuah toko kue memiliki 120 kotak donat. Jika setiap kotak berisi 6 donat dan donat tersebut akan dibagikan kepada 30 anak panti asuhan, berapa banyak donat yang diterima setiap anak?",
        options: ["20 donat", "24 donat", "30 donat", "36 donat"],
        correctIndex: 1,
        explanation: "Total donat = 120 x 6 = 720. Donat per anak = 720 / 30 = 24."
    },
    {
        question: "2. Suhu udara di dalam sebuah freezer adalah -12¬∞C. Karena mati lampu, suhu naik 3¬∞C setiap 10 menit. Berapa suhu freezer setelah 30 menit?",
        options: ["-3¬∞C", "-6¬∞C", "-9¬∞C", "0¬∞C"],
        correctIndex: 0,
        explanation: "Kenaikan suhu = (30 / 10) x 3 = 9¬∞C. Suhu akhir = -12 + 9 = -3¬∞C."
    },
    {
        question: "3. Ibu membeli 2,5 kg gula pasir dan 1 1/4 kg tepung terigu. Berat total belanjaan Ibu dalam bentuk desimal adalah...",
        options: ["3,25 kg", "3,50 kg", "3,75 kg", "4,00 kg"],
        correctIndex: 2,
        explanation: "2,5 + 1,25 (dari 1 1/4) = 3,75 kg."
    },
    {
        question: "4. Perbandingan jumlah buku cerita Andi dan Budi adalah 2 : 3. Jika jumlah buku mereka adalah 20, berapa banyak buku milik Budi?",
        options: ["8", "10", "12", "15"],
        correctIndex: 2,
        explanation: "Bagian Budi = 3 / (2+3) x 20 = 3/5 x 20 = 12 buku."
    },
    {
        question: "5. Manakah dari pecahan berikut yang memiliki nilai terkecil?",
        options: ["1/2", "2/5", "3/10", "1/4"],
        correctIndex: 2,
        explanation: "1/2=0,5; 2/5=0,4; 3/10=0,3; 1/4=0,25. Maka 0,3 (3/10) bukan yang terkecil? Maaf, 1/4 (0,25) adalah yang terkecil."
    },
    // Note: Perbaikan Logika Jawaban No. 5 -> 1/4 (0,25) adalah terkecil, correctIndex: 3.
    {
        question: "5. Manakah dari pecahan berikut yang memiliki nilai terkecil?",
        options: ["1/2", "2/5", "3/10", "1/4"],
        correctIndex: 3,
        explanation: "Konversi ke desimal: 0,5; 0,4; 0,3; 0,25. Maka 1/4 adalah nilai terkecil."
    },
    {
        question: "6. KPK dari bilangan 15 dan 20 adalah...",
        options: ["30", "40", "60", "80"],
        correctIndex: 2,
        explanation: "Kelipatan 15: 15, 30, 45, 60. Kelipatan 20: 20, 40, 60. KPK = 60."
    },
    {
        question: "7. Sebuah taman berbentuk persegi panjang dengan panjang 12 meter dan lebar 8 meter. Berapakah luas taman tersebut?",
        options: ["40 m¬≤", "84 m¬≤", "96 m¬≤", "100 m¬≤"],
        correctIndex: 2,
        explanation: "Luas = 12 x 8 = 96 meter persegi."
    },
    {
        question: "8. FPB dari 24 dan 36 adalah...",
        options: ["6", "12", "18", "24"],
        correctIndex: 1,
        explanation: "Faktor 24: 1,2,3,4,6,8,12,24. Faktor 36: 1,2,3,4,6,9,12,18,36. FPB = 12."
    },
    {
        question: "9. Angka 7 pada bilangan 4.725 menempati nilai tempat...",
        options: ["Satuan", "Puluhan", "Ratusan", "Ribuan"],
        correctIndex: 2,
        explanation: "4 (ribuan), 7 (ratusan), 2 (puluhan), 5 (satuan)."
    },
    {
        question: "10. Hasil dari 3/4 + 1/2 adalah...",
        options: ["4/6", "5/4", "1", "1/4"],
        correctIndex: 1,
        explanation: "3/4 + 2/4 = 5/4 atau 1 1/4."
    },

    // --- LITERASI: MEMAHAMI TEKS ---
    {
        question: "11. (Teks) 'Sampah plastik membutuhkan waktu ratusan tahun untuk terurai. Kita harus mulai mengurangi penggunaan kantong plastik sekali pakai.' Apa pesan utama paragraf tersebut?",
        options: ["Plastik mudah hancur", "Larangan membuang sampah", "Pentingnya mengurangi sampah plastik", "Cara mendaur ulang plastik"],
        correctIndex: 2,
        explanation: "Teks menekankan pada pengurangan penggunaan karena sulit terurai."
    },
    {
        question: "12. Sinonim dari kata 'Edukasi' dalam konteks sekolah adalah...",
        options: ["Pendidikan", "Permainan", "Hiburan", "Pekerjaan"],
        correctIndex: 0,
        explanation: "Edukasi bermakna pendidikan atau proses belajar mengajar."
    },
    {
        question: "13. Manakah kalimat yang menggunakan kata depan 'di' dengan benar?",
        options: ["Andi sedang dimakam.", "Ibu memasak di dapur.", "Adik bermain dihalaman.", "Buku itu diletakan dimeja."],
        correctIndex: 1,
        explanation: "Kata depan 'di' dipisah jika menunjukkan tempat (di dapur)."
    },
    {
        question: "14. 'Matahari mulai tenggelam di ufuk barat, memberikan warna jingga yang indah.' Kalimat tersebut menggambarkan suasana pada...",
        options: ["Pagi hari", "Siang hari", "Sore hari", "Malam hari"],
        correctIndex: 2,
        explanation: "Matahari tenggelam (sunset) terjadi pada sore hari."
    },
    {
        question: "15. (Teks) 'Kancil melihat banyak buah di seberang sungai, namun air sungai sedang meluap.' Apa masalah utama yang dihadapi Kancil?",
        options: ["Kancil tidak lapar", "Sungai sangat kering", "Kancil kesulitan menyeberangi sungai", "Buah-buahan sudah habis"],
        correctIndex: 2,
        explanation: "Masalahnya adalah air sungai meluap sehingga menghalangi Kancil menyeberang."
    },
    {
        question: "16. Kata tanya yang tepat untuk menanyakan 'Waktu' adalah...",
        options: ["Mengapa", "Bagaimana", "Kapan", "Berapa"],
        correctIndex: 2,
        explanation: "'Kapan' digunakan untuk menanyakan keterangan waktu."
    },
    {
        question: "17. Lawan kata (antonim) dari 'Boros' adalah...",
        options: ["Pelit", "Hemat", "Kaya", "Sederhana"],
        correctIndex: 1,
        explanation: "Hemat adalah lawan kata yang tepat untuk boros."
    },
    {
        question: "18. 'Ibu membeli apel, jeruk dan mangga di pasar.' Manakah perbaikan tanda baca yang benar?",
        options: ["Ibu membeli apel jeruk, dan mangga di pasar.", "Ibu membeli apel, jeruk, dan mangga di pasar.", "Ibu membeli apel, jeruk dan mangga, di pasar.", "Ibu membeli apel jeruk mangga di pasar."],
        correctIndex: 1,
        explanation: "Koma digunakan untuk memisahkan unsur-unsur dalam rincian."
    },
    {
        question: "19. Ide pokok paragraf: 'Batik merupakan warisan budaya Indonesia yang diakui dunia. Banyak turis menyukai motif batik dari berbagai daerah.'",
        options: ["Turis senang belanja", "Motif batik sangat mahal", "Batik sebagai warisan budaya dunia", "Cara membuat batik"],
        correctIndex: 2,
        explanation: "Kalimat utama menyatakan batik sebagai warisan budaya yang diakui."
    },
    {
        question: "20. Kalimat manakah yang merupakan kalimat perintah?",
        options: ["Tolong tutup pintu itu!", "Siapa nama gurumu?", "Hari ini sangat panas.", "Saya suka membaca."],
        correctIndex: 0,
        explanation: "Kalimat perintah ditandai dengan permintaan melakukan sesuatu dan tanda seru."
    },

    // --- NUMERASI: PENGUKURAN & GEOMETRI ---
    {
        question: "21. Sebuah akuarium berbentuk balok dengan panjang 80 cm, lebar 40 cm, dan tinggi 50 cm. Volume akuarium adalah...",
        options: ["16.000 cm¬≥", "160.000 cm¬≥", "1.600 cm¬≥", "160 cm¬≥"],
        correctIndex: 1,
        explanation: "Volume = 80 x 40 x 50 = 160.000 cm¬≥."
    },
    {
        question: "22. Jarum jam menunjukkan pukul 03.00. Berapakah besar sudut terkecil yang terbentuk?",
        options: ["45 derajat", "60 derajat", "90 derajat", "120 derajat"],
        correctIndex: 2,
        explanation: "Jarak 3 angka (12 ke 3) = 3 x 30 derajat = 90 derajat."
    },
    {
        question: "23. 2,5 liter + 500 ml = ... ml",
        options: ["750 ml", "2.550 ml", "3.000 ml", "3.500 ml"],
        correctIndex: 2,
        explanation: "2,5 liter = 2500 ml. 2500 + 500 = 3000 ml."
    },
    {
        question: "24. Bangun datar yang memiliki dua pasang sisi sejajar dan sudutnya tidak siku-siku adalah...",
        options: ["Persegi", "Jajar Genjang", "Persegi Panjang", "Trapesium Siku-siku"],
        correctIndex: 1,
        explanation: "Jajar genjang memiliki sisi sejajar namun sudutnya bukan 90 derajat."
    },
    {
        question: "25. Jika tinggi rata-rata 5 siswa adalah 140 cm, berapa total tinggi kelima siswa tersebut?",
        options: ["600 cm", "700 cm", "750 cm", "800 cm"],
        correctIndex: 1,
        explanation: "Total = Rata-rata x Jumlah siswa = 140 x 5 = 700 cm."
    },

    // --- LITERASI & KARAKTER ---
    {
        question: "26. Menghargai pendapat teman saat berdiskusi kelompok merupakan pengamalan Pancasila sila ke...",
        options: ["2", "3", "4", "5"],
        correctIndex: 2,
        explanation: "Musyawarah dan menghargai pendapat adalah ciri sila ke-4."
    },
    {
        question: "27. Simbol sila pertama Pancasila adalah...",
        options: ["Rantai", "Pohon Beringin", "Bintang", "Padi dan Kapas"],
        correctIndex: 2,
        explanation: "Bintang emas merupakan simbol sila Ketuhanan Yang Maha Esa."
    },
    {
        question: "28. 'Rina selalu menyisihkan sebagian uang sakunya untuk ditabung.' Perilaku Rina menunjukkan sikap...",
        options: ["Hemat", "Sombong", "Boros", "Kikir"],
        correctIndex: 0,
        explanation: "Menabung adalah perwujudan sikap hemat."
    },
    {
        question: "29. Apa yang sebaiknya dilakukan jika melihat fasilitas sekolah yang rusak?",
        options: ["Mendiamkannya", "Menambah kerusakan", "Melaporkan kepada guru", "Menyalahkan teman"],
        correctIndex: 2,
        explanation: "Tindakan bertanggung jawab adalah melaporkannya ke pihak berwenang (guru)."
    },
    {
        question: "30. 'Bhinneka Tunggal Ika' diambil dari kitab Sutasoma karangan...",
        options: ["Mpu Tantular", "Mpu Prapanca", "Gajah Mada", "Hayam Wuruk"],
        correctIndex: 0,
        explanation: "Mpu Tantular adalah penulis Kakawin Sutasoma."
    },

    // --- NUMERASI: DATA & LOGIKA ---
    {
        question: "31. Dalam sebuah lomba, nilai Andi 85, Budi 90, Cici 80, dan Didi 85. Siapakah yang mendapatkan nilai tertinggi?",
        options: ["Andi", "Budi", "Cici", "Didi"],
        correctIndex: 1,
        explanation: "90 adalah nilai tertinggi di antara data tersebut."
    },
    {
        question: "32. 5 gross + 2 lusin = ... buah",
        options: ["720", "744", "800", "844"],
        correctIndex: 1,
        explanation: "1 gross = 144. 5 gross = 720. 2 lusin = 24. Total = 744."
    },
    {
        question: "33. Jarak kota P ke Q adalah 150 km. Bus menempuhnya dalam waktu 3 jam. Berapakah kecepatan rata-rata bus?",
        options: ["40 km/jam", "45 km/jam", "50 km/jam", "60 km/jam"],
        correctIndex: 2,
        explanation: "Kecepatan = Jarak / Waktu = 150 / 3 = 50 km/jam."
    },
    {
        question: "34. Bentuk pecahan biasa dari 0,75 adalah...",
        options: ["1/2", "3/4", "1/4", "2/3"],
        correctIndex: 1,
        explanation: "0,75 = 75/100 = 3/4."
    },
    {
        question: "35. Hasil dari 20% x 500 adalah...",
        options: ["50", "100", "150", "200"],
        correctIndex: 1,
        explanation: "20/100 x 500 = 100."
    },

    // --- LITERASI: ILMU PENGETAHUAN ---
    {
        question: "36. Alat pernapasan pada ikan adalah...",
        options: ["Paru-paru", "Trakea", "Insang", "Kulit"],
        correctIndex: 2,
        explanation: "Ikan menggunakan insang untuk menyaring oksigen di dalam air."
    },
    {
        question: "37. Penyerbukan pada bunga yang dibantu oleh angin disebut...",
        options: ["Anemogami", "Zoidiogami", "Hidrogami", "Antropogami"],
        correctIndex: 0,
        explanation: "Anemogami adalah istilah untuk penyerbukan melalui bantuan angin."
    },
    {
        question: "38. Berikut ini yang termasuk perubahan wujud menyublim adalah...",
        options: ["Es mencair", "Air menguap", "Kapur barus mengecil", "Lilin meleleh"],
        correctIndex: 2,
        explanation: "Menyublim adalah perubahan wujud dari padat ke gas (kapur barus)."
    },
    {
        question: "39. Planet yang dikenal sebagai 'Planet Merah' adalah...",
        options: ["Venus", "Mars", "Yupiter", "Saturnus"],
        correctIndex: 1,
        explanation: "Mars tampak berwarna kemerahan karena kandungan oksida besi."
    },
    {
        question: "40. Bunyi tidak dapat merambat di...",
        options: ["Air", "Udara", "Ruang hampa udara", "Benda padat"],
        correctIndex: 2,
        explanation: "Bunyi membutuhkan medium; di ruang hampa tidak ada partikel perambat."
    },

    // --- LANJUTAN CAMPURAN ---
    {
        question: "41. Hasil dari 1.000 - 250 x 3 adalah...",
        options: ["2.250", "750", "500", "250"],
        correctIndex: 3,
        explanation: "Perkalian didahulukan: 250 x 3 = 750. Maka 1.000 - 750 = 250."
    },
    {
        question: "42. Sebuah lingkaran memiliki jari-jari 7 cm. Luasnya adalah... (phi = 22/7)",
        options: ["44 cm¬≤", "154 cm¬≤", "176 cm¬≤", "616 cm¬≤"],
        correctIndex: 1,
        explanation: "Luas = 22/7 x 7 x 7 = 154 cm¬≤."
    },
    {
        question: "43. Mata uang negara Malaysia adalah...",
        options: ["Rupiah", "Dollar", "Ringgit", "Peso"],
        correctIndex: 2,
        explanation: "Mata uang resmi Malaysia adalah Ringgit."
    },
    {
        question: "44. Lagu kebangsaan Indonesia Raya diciptakan oleh...",
        options: ["W.R. Supratman", "C. Simanjuntak", "Ibu Sud", "Kusbini"],
        correctIndex: 0,
        explanation: "Wage Rudolf Supratman adalah pencipta lagu kebangsaan RI."
    },
    {
        question: "45. Berapa hasil dari 2¬≥ + 3¬≤ ?",
        options: ["12", "15", "17", "18"],
        correctIndex: 2,
        explanation: "8 + 9 = 17."
    },
    {
        question: "46. Perubahan energi yang terjadi pada setrika listrik adalah...",
        options: ["Listrik ke Gerak", "Listrik ke Panas", "Listrik ke Cahaya", "Listrik ke Bunyi"],
        correctIndex: 1,
        explanation: "Setrika mengubah energi listrik menjadi energi panas (kalor)."
    },
    {
        question: "47. Penulisan nama kota dan tanggal yang benar adalah...",
        options: ["Surabaya, 12 Mei 2024", "Surabaya 12 mei 2024", "surabaya, 12 Mei 2024", "Surabaya, 12, Mei 2024"],
        correctIndex: 0,
        explanation: "Nama kota diawali huruf kapital, diikuti koma, lalu tanggal."
    },
    {
        question: "48. Hewan pemakan segala (tumbuhan dan daging) disebut...",
        options: ["Herbivora", "Karnivora", "Omnivora", "Insektivora"],
        correctIndex: 2,
        explanation: "Omnivora adalah sebutan untuk hewan pemakan segala."
    },
    {
        question: "49. Rumah adat dari daerah Papua adalah...",
        options: ["Joglo", "Gadang", "Honai", "Tongkonan"],
        correctIndex: 2,
        explanation: "Honai adalah rumah adat khas masyarakat Papua."
    },
    {
        question: "50. Hari Pendidikan Nasional diperingati setiap tanggal...",
        options: ["21 April", "2 Mei", "17 Agustus", "10 November"],
        correctIndex: 1,
        explanation: "2 Mei bertepatan dengan hari lahir Ki Hajar Dewantara."
    }
];
        // --- SYSTEM ENGINE ---
        const quizArea = document.getElementById('quiz-area');
        const scoreCorrectEl = document.getElementById('score-correct');
        const scoreWrongEl = document.getElementById('score-wrong');
        // Kita ambil element btnSubmit disini juga untuk logika tampilan
        const btnSubmitGame = document.getElementById('btn-submit');

        // VARIABLE GLOBAL (Agar bisa dibaca oleh script Firebase nanti)
        var correctCount = 0;
        var wrongCount = 0;
        var answeredCount = 0;

        function renderQuiz() {
            quizArea.innerHTML = '';
            dataSoal.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'question-card';
                
                const qText = document.createElement('div');
                qText.className = 'question-text';
                qText.innerText = item.question;
                card.appendChild(qText);

                const optList = document.createElement('ul');
                optList.className = 'options';

                item.options.forEach((opt, optIndex) => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerText = opt;
                    btn.onclick = () => checkAnswer(btn, item, optIndex, optList, explanationDiv);
                    optList.appendChild(btn);
                });
                
                card.appendChild(optList);

                const explanationDiv = document.createElement('div');
                explanationDiv.className = 'explanation';
                explanationDiv.innerHTML = `<strong>Jawaban:</strong> ${item.options[item.correctIndex]}<br><em>${item.explanation}</em>`;
                card.appendChild(explanationDiv);

                quizArea.appendChild(card);
            });
        }

        function checkAnswer(selectedBtn, dataItem, selectedIndex, optListContainer, expDiv) {
            if (optListContainer.classList.contains('answered')) return;

            optListContainer.classList.add('answered');
            answeredCount++;

            const allBtns = optListContainer.querySelectorAll('.option-btn');
            allBtns.forEach(btn => btn.classList.add('disabled'));

            if (selectedIndex === dataItem.correctIndex) {
                selectedBtn.classList.add('correct');
                correctCount++;
                scoreCorrectEl.innerText = correctCount;
            } else {
                selectedBtn.classList.add('wrong');
                wrongCount++;
                scoreWrongEl.innerText = wrongCount;
                allBtns[dataItem.correctIndex].classList.add('correct');
            }

            expDiv.style.display = 'block';
            checkCompletion();
        }

        function checkCompletion() {
            if (answeredCount === dataSoal.length) {
                btnSubmitGame.classList.add('active');
                btnSubmitGame.innerText = "KIRIM JAWABAN SEKARANG!";
            }
        }

        // Render pertama kali
        renderQuiz();
        
        // --- LOGIKA MATA PASSWORD ---
        const toggleBtn = document.getElementById('btn-toggle-pass');
        const passInput = document.getElementById('input-password');

        toggleBtn.addEventListener('click', () => {
            // Cek tipe saat ini
            const type = passInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passInput.setAttribute('type', type);
            
            // Opsional: Ubah warna icon biar user tau lagi aktif
            toggleBtn.style.color = type === 'text' ? '#27ae60' : '#888';
        });

    </script> 
<script type="module">
          import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
        import { getFirestore, collection, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

        // --- KONFIGURASI FIREBASE ---
        const firebaseConfig = {
            apiKey: "AIzaSyCrGo4oJqVPesVBDd52-OGT2sHFNdeI5jo",
            authDomain: "mywhatitu.firebaseapp.com",
            projectId: "mywhatitu",
            storageBucket: "mywhatitu.firebasestorage.app",
            messagingSenderId: "756121162482",
            appId: "1:756121162482:web:3fbc2d0e26f70e51b6f66b"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- KODE SOAL ---
        const KODE_SOAL = "0002"; 
        const KELAS = "5"; 

        const btnSubmitFirebase = document.getElementById('btn-submit');

        btnSubmitFirebase.addEventListener('click', async () => {
            if (!btnSubmitFirebase.classList.contains('active')) return;

            // 1. Ambil Input
            const inputNamaEl = document.getElementById('input-nama');
            const inputPassEl = document.getElementById('input-password');

            let namaAsli = inputNamaEl.value.trim();
            let passwordInput = inputPassEl.value.trim();

            // --- VALIDASI DENGAN CUSTOM MODAL ---
            if (namaAsli === "") {
                showWarning("Nama Kosong!", "Tolong isi nama lengkapmu dulu ya, supaya nilai kamu tercatat di papan peringkat.");
                return;
            }
            if (passwordInput === "") {
                showWarning("Password Kosong!", "Silakan buat password bebas (misal: 1234). Ini berguna biar nilaimu gak dibajak orang lain.");
                return;
            }

            // Hitung Skor
            let finalScore = Math.round((correctCount / dataSoal.length) * 100);

            // Siapkan Data Baru
            const dataJawaban = {
                kode_soal: KODE_SOAL,
                kode_kelas: KELAS,
                nama_user: namaAsli,
                password_user: passwordInput,
                skor: finalScore,
                benar: correctCount,
                salah: wrongCount,
                waktu_terakhir: new Date().toISOString()
            };

            const originalText = btnSubmitFirebase.innerText;
            btnSubmitFirebase.innerText = "Mengecek Data...";
            btnSubmitFirebase.classList.add('disabled');

            try {
                const uniqueDocID = `${namaAsli.toLowerCase().replace(/\s/g, '_')}_${KODE_SOAL}`;
                const docRef = doc(db, "hasil_kuis", uniqueDocID);

                // CEK DATABASE
                const docSnap = await getDoc(docRef);

                if (docSnap.exists()) {
                    // USER LAMA
                    const dataLama = docSnap.data();

                    if (dataLama.password_user !== passwordInput) {
                        // --- PASSWORD SALAH (CUSTOM MODAL) ---
                        showWarning("Akses Ditolak!", `Nama "${namaAsli}" sudah pernah main, tapi password yang kamu masukkan salah. Coba ingat-ingat lagi password lamamu.`);
                        
                        btnSubmitFirebase.innerText = originalText;
                        btnSubmitFirebase.classList.remove('disabled');
                        return; 
                    } 
                    
                    // PASSWORD BENAR -> UPDATE
                    await setDoc(docRef, dataJawaban, { merge: true });

                } else {
                    // USER BARU -> CREATE
                    await setDoc(docRef, dataJawaban);
                }

                // SUKSES
                showModal(correctCount, wrongCount, finalScore);
                btnSubmitFirebase.innerText = "Terkirim ‚úÖ";
                btnSubmitFirebase.classList.remove('active');

            } catch (e) {
                console.error("Error: ", e);
                showWarning("Error Koneksi", "Gagal menghubungi database. Cek koneksi internetmu. Detail: " + e.message);
                btnSubmitFirebase.innerText = originalText;
                btnSubmitFirebase.classList.remove('disabled');
            }
        });

        // --- FUNGSI MODAL SUKSES ---
        window.showModal = (benar, salah, skor) => {
            document.getElementById('modal-correct').innerText = benar;
            document.getElementById('modal-wrong').innerText = salah;
            document.getElementById('modal-score').innerText = skor;
            document.getElementById('custom-modal').classList.add('show');
        }

        window.closeModal = () => {
            document.getElementById('custom-modal').classList.remove('show');
        }

        // --- FUNGSI MODAL WARNING (BARU) ---
        // Fungsi ini dipasang ke window biar bisa dipanggil darimana saja
        window.showWarning = (judul, pesan) => {
            document.getElementById('warning-title').innerText = judul;
            document.getElementById('warning-message').innerText = pesan;
            document.getElementById('warning-modal').classList.add('show');
        }

        window.closeWarning = () => {
            document.getElementById('warning-modal').classList.remove('show');
        }
    </script>
    
</body>
</html>